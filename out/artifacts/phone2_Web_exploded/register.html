<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>登录</title>
		<link rel="stylesheet" type="text/css" href="WEB-INF/css/register.css"/>
	</head>
	<body>
	
		<header>
			<h2>MyPhone</h2>
		</header>
		
		<div id="main">
			<div id="table">
					<table>
						<tr><th>新用户注册</th></tr>
						<tr>
							<td>
								<input placeholder="请设置8-10位登录账号" type="text" name="loginName" id="loginName"/>
							</td>
						</tr>
						<tr>
							<td>
								<input placeholder="请设置6位密码" type="text" name="password" id="password"/>
							</td>
						</tr>
						<tr>
							<td>
								<input placeholder="请再次输入密码" type="text" name="againPwd" id="againPwd"/>
							</td>
						</tr>
						<tr>
							<td>
								<input placeholder="请输入真实姓名" type="text" name="userName" id="userName"/>
							</td>
						</tr>
						<tr>
							<td>
								<input placeholder="请设置手机号" type="text" name="phone" id="phone"/>
							</td>
						</tr>
						<tr class="error">
							<td>
								{{error}}
							</td>
						</tr>
						<tr>
							<td>
								<button id="register" type="button">立即注册</button>
							</td>
						</tr>
						<tr>
							<td>
								<a href="denglu.html">已有账号，去登录</a>
							</td>
						</tr>
					</table>
			</div>
		</div>
		
		<footer>
			<span id="name">@软件10班 SK小组版权所有</span>
		</footer>
	
		<script type="text/javascript" src="WEB-INF/js/jquery-3.5.1.js"></script>
		<script src="WEB-INF/js/bootstrap.js" type="text/javascript"></script>
		<script type="text/javascript" src="WEB-INF/js/vue.js"></script>
		<script type="text/javascript">
			$(function(){
				vue = new Vue({
					el:".error",
					data:{
						error:""
					}
				});
			});
			$("#register").click(function(){
				var loginName = $("#loginName").val();
				var password = $("#password").val();
				var againPwd = $("#againPwd").val();
				var userName = $("#userName").val();
				var phone = $("#phone").val();
				if(loginName.length>=8 && loginName.length<=10 && password.length==6 && againPwd==password && userName!="" && phone.length==11){
					var d = {
						"loginName":loginName,
						"password":password,
						"userName":userName,
						"phone":phone
					}
					$.post("/register",d,function(data){
						if(data){
							location.href="denglu.html";
						}
						else{
							vue.error="注册失败"
						}
					});
				}
				else{
					vue.error="信息格式错误"
				}
			});
		</script>
	</body>
</html>
